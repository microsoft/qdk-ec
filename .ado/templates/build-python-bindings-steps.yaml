steps:
- task: UsePythonVersion@0
  displayName: Install Python
  inputs:
    versionSpec: "$(pythonVersion)"

- bash: |
    python -m venv qdk_env
    source qdk_env/bin/activate
    python -m pip install --upgrade maturin pytest hypothesis more-itertools
    cd binar/bindings/python
    maturin develop --release
    cd ../../..
    cd paulimer/bindings/python
    maturin develop --release
  displayName: Build Python bindings (Linux/Mac)
  condition: ne( variables['Agent.OS'], 'Windows_NT')

- script: |
    python -m venv qdk_env
    call qdk_env\Scripts\activate.bat
    python -m pip install --upgrade maturin pytest hypothesis more-itertools
    cd binar\bindings\python
    maturin develop --release
    cd ..\..\..
    cd paulimer\bindings\python
    maturin develop --release
  displayName: Build Python bindings (Windows)
  condition: eq( variables['Agent.OS'], 'Windows_NT')
